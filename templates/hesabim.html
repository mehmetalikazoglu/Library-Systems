{% extends "base.html" %}
{% block content %}

<div class="container mt-4">
    <h3 class="mb-4">Hesap Ayarları</h3>

    <form method="POST" enctype="multipart/form-data" class="row g-3 shadow-sm p-4 rounded bg-light">

        <!-- Profil Fotoğrafı -->
        <div class="col-md-4 text-center">
            {% set prof = session.get('profil_resmi') %}
            {% if prof %}
                <img src="{{ url_for('static', filename='profil_fotograflari/' ~ prof) }}"
                     alt="Profil" class="img-thumbnail rounded-circle mb-2"
                     style="width: 150px; height: 150px; object-fit: cover;">
            {% else %}
                <img src="{{ url_for('static', filename='defaultprofil.jpg') }}"
                     alt="Profil" class="img-thumbnail rounded-circle mb-2"
                     style="width: 150px; height: 150px; object-fit: cover;">
            {% endif %}

            <div class="form-group mt-2">
                <label for="profil_resmi" class="form-label">Yeni Profil Fotoğrafı</label>
                <input type="file" name="profil_resmi" id="profil_resmi" class="form-control" accept="image/*">
            </div>

            {% if prof %}
            <div class="form-check mt-2">
                <input class="form-check-input" type="checkbox" name="resim_kaldir" id="resim_kaldir" value="true">
                <label class="form-check-label" for="resim_kaldir">
                    Mevcut fotoğrafı kaldır
                </label>
            </div>
            {% endif %}
        </div>

        <!-- Ad ve Email -->
        <div class="col-md-8">
            <div class="mb-3">
                <label for="ad" class="form-label">Adınız</label>
                <input type="text" name="ad" value="{{ user.ad }}" class="form-control" id="ad" required>
            </div>
            <div class="mb-3">
                <label for="soyad" class="form-label">Soyadınız</label>
                <input type="text" name="soyad" value="{{ user.soyad }}" class="form-control" id="soyad" required>
            </div>
            <div class="mb-3">
                <label for="email" class="form-label">E-posta</label>
                <input type="email" name="email" value="{{ user.email }}" class="form-control" id="email" required>
            </div>

            <button type="submit" name="guncelle" class="btn btn-primary w-100">Bilgileri Güncelle</button>
        </div>
    </form>

    <hr class="my-4">

    <!-- Şifre Güncelle -->
    <h4>Şifre Değiştir</h4>
    <form method="POST" class="shadow-sm p-4 rounded bg-light">
        <input type="password" name="mevcut_sifre" class="form-control mb-2" placeholder="Mevcut Şifre" required>
        <input type="password" name="yeni_sifre" class="form-control mb-2" placeholder="Yeni Şifre" required>
        <button type="submit" name="sifre" class="btn btn-warning w-100">Şifreyi Güncelle</button>
    </form>

    <hr class="my-4">

    <!-- Hesap Sil -->
    <h4 class="text-danger">Hesabı Sil</h4>
    <form method="POST">
        <button name="sil" class="btn btn-danger" onclick="return confirm('Hesabınızı silmek istediğinize emin misiniz?')">
            Hesabı Sil 
        </button> 
    </form>
                   
    <br>
</div>

{% endblock %}
